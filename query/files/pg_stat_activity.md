### Работа с pg_stat_activity

PostgreSQL RDBMS имеет очень информативные встроенные инструменты для отслеживания состояния базы данных. Одним из таких инструментов является pg_stat_activity.
Это системное представление, позволяющее отслеживать процессы баз данных в режиме реального времени. Это представление сравнимо с системной командой top, 
это одно из первых мест, с которых администратор базы данных может начать расследование в случае возникновения какой-либо проблемы. 
Далее будет приведено несколько полезных примеров, как это представление можно использовать для обнаружения аномальной активности. 
Для начала нам нужен только клиент postgresql, например psql.

Для начала можно использовать самый простой запрос:

      SELECT * FROM pg_stat_activity;

Не важно, к какой базе данных вы подключены, pg_stat_activity является общей для всех баз данных.

pg_stat_activity показывает одну строку для каждого соединения с базой данных. Для каждого соединения существует отдельный процесс UNIX. Для одного соединения есть несколько атрибутов:
***pid*** - идентификатор процесса, который обрабатывает соединение. В терминологии PostgreSQL этот процесс называется backend или worker.
***datid, datname***   - идентификатор и имя базы данных, к которой подключается клиент.
***useysid, usename*** - идентификатор и имя, которое использовалось для подключения.
