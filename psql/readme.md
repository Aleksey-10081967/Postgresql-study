### Команды psql

#### Основные понятия psql

psql --help

Строка подключения к БД postgresql:

    psql -d <name_database> -h <host> -p <port> -U <user>

    psql -v name=value - указание переменной при запуске psql
    
По умолчанию port 5432

Общий системный файл называется psqlrc и располагается в каталоге /usr/local/pgsql/etc при обычной сборке из исходных кодов.

Расположение этого каталога можно узнать командой:

    pg_config --sysconfdir.

Пользовательский файл находится в домашнем каталоге пользователя ОС и называется .psqlrc. Его расположение можно изменить, задав
переменную окружения PSQLRC.

В эти файлы можно записать команды, настраивающие psql — например, изменить приглашение, включить вывод времени выполнения команд и т. п.

История команд сохраняется в файле .psql_history в домашнем каталоге пользователя. 
Расположение этого файла можно изменить, задав переменную окружения PSQL_HISTORY или переменную psql HISTFILE. 
По умолчанию хранится 500 последних команд; это число можно изменить переменной psql HISTSIZE.
Пролистывать историю команд можно стрелками вверх и вниз, искать с помощью Ctrl+R — доступен весь набор команд, предлагаемых readline

Описание настройки приглашения в документации: https://postgrespro.ru/docs/postgresql/10/app-psql.html#app-psql-prompting

#### Команды psql

**\с <name_database>** - переключение на БД (name_database)

**\?** - вывод списка команд psql

**\? variables** - вывод списка переменных psql

**\h** - вывод списка команд PostgreSQL

**\h select** - вывод подсказки по команде select

**\x** - переключение в расширенный режим вывода или возврат обратно

**\conninfo** - просмотр подключения к серверу postgres

**\! <name_command>** - использование команд shell

**\cd <путь>** - переход в другой каталог OC из psql

**\i <name_script>** - запуск скрипта в psql

**\e <name_file>** - редактирование файла в psql

**\a** - вывод без выравнивания

**\t** - вывод без заголовка

**\p** - просмотр содержимого буфера psql

**\g** - выполнение повторно команды из буфера

**\w <file>** - запись буфера в файл
  
**\r** - очиска буфера
  
**\gx** - установка после запроса выводит результаты в разширенном виде
  
**\timing** - отображение времени выполнения запроса в консольной утилите PostgreSQL

**\o <name_file>** - весь вывод попадает в файл с именем name_file

**\set ECHO_HIDDEN on** - для просмотра что у нас под копотом, чтобы посмотреть какие запросы спрятаны в psql

