### PSQL

[Основные понятия psql](https://github.com/Aleksey-10081967/Postgresql-study/blob/main/psql/readme.md#%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5-%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F-psql)

[команды psql](https://github.com/Aleksey-10081967/Postgresql-study/blob/main/psql/readme.md#%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B-psql)

[Просмотр relations (tables, views,indexes ...)](https://github.com/Aleksey-10081967/Postgresql-study/blob/main/psql/readme.md#%D0%BF%D1%80%D0%BE%D1%81%D0%BC%D0%BE%D1%82%D1%80-relations-tables-viewsindexes-)

### Основные понятия psql

psql --help

Строка подключения к БД postgresql:

    psql -d <name_database> -h <host> -p <port> -U <user>

    psql -v name=value - указание переменной при запуске psql
    
По умолчанию port 5432

Общий системный файл называется psqlrc и располагается в каталоге /usr/local/pgsql/etc при обычной сборке из исходных кодов.

Расположение этого каталога можно узнать командой:

    pg_config --sysconfdir.

Пользовательский файл находится в домашнем каталоге пользователя ОС и называется .psqlrc. Его расположение можно изменить, задав
переменную окружения PSQLRC.

В эти файлы можно записать команды, настраивающие psql — например, изменить приглашение, включить вывод времени выполнения команд и т. п.

История команд сохраняется в файле .psql_history в домашнем каталоге пользователя. 
Расположение этого файла можно изменить, задав переменную окружения PSQL_HISTORY или переменную psql HISTFILE. 
По умолчанию хранится 500 последних команд; это число можно изменить переменной psql HISTSIZE.
Пролистывать историю команд можно стрелками вверх и вниз, искать с помощью Ctrl+R — доступен весь набор команд, предлагаемых readline

Описание настройки приглашения в документации: https://postgrespro.ru/docs/postgresql/10/app-psql.html#app-psql-prompting

### Команды psql

**\с <name_database>** - переключение на БД (name_database)

**\?** - вывод списка команд psql

**\? variables** - вывод списка переменных psql

**\h** - вывод списка команд PostgreSQL

**\h select** - вывод подсказки по команде select

**\x** - переключение в расширенный режим вывода или возврат обратно

**\conninfo** - просмотр подключения к серверу postgres

**\! <name_command>** - использование команд shell

**\cd <путь>** - переход в другой каталог OC из psql

**\i <name_script>** - запуск скрипта в psql

**\e <name_file>** - редактирование файла в psql

**\a** - вывод без выравнивания

**\t** - вывод без заголовка

**\p** - просмотр содержимого буфера psql

**\g** - выполнение повторно команды из буфера

**\w <file>** - запись буфера в файл
  
**\r** - очиска буфера
  
**\gx** - установка после запроса выводит результаты в разширенном виде
  
**\timing** - отображение времени выполнения запроса в консольной утилите PostgreSQL
    
**\o <name_file>** - весь вывод попадает в файл с именем name_file

**\set ECHO_HIDDEN on** - для просмотра что у нас под копотом, чтобы посмотреть какие запросы спрятаны в psql

### Просмотр relations (tables, views,indexes ...)
    
**\d** - вывод всех relations в БД
    
**\dt** - вывод списка таблиц в БД
    
**\dtS+** - 
    
**\dp+** - ввод прав у ролей
    
**\dx** - вывод установленных разширений
    
**\df** - вывод списка функций
    
**\dn** - вывод списка схем в БД. Не выводит системные схемы
    
**\dn+ <имя_схемы>** - выводит привелегии на схему
    
**\db** - вывод табличных пространств
    
**\dpp** - просмотр настроек DEFAULT PRIVILEGES
    
**\dRp+** - просмотр всех имеющихся публикаций на сервере
    
**\dRs** - просмотр имеющихся подписок на сервере
    
**\dcS** - список доступных перекодировок (\dcS *koi8* - вывод доступных перекодировок для koi8)
    
**\dOS+ ru** - правила сортировки для русского языка 
    
**\dp mytable** - просмотр существующих прав, назначенных для таблицы и столбцов metable
    
    
    
    
